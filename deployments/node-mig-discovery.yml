apiVersion: v1
kind: Pod
metadata:
  name: node-mig-discovery
  namespace: default
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        # - matchExpressions:
        #   - key: nvidia.com/mig.strategy
        #     operator: In
        #     values:
        #     - mixed
        #     - single
        - matchExpressions:
          - key: kubernetes.io/hostname
            operator: In
            values:
            - dl13

  containers:

  - image: riskfuel/mig-operator-test:v0.0.1
    imagePullPolicy: Always
    name: node-mig-discovery
    securityContext:
      privileged: true
    env:
    - name: PYTHONUNBUFFERED
      value: "0"
    command: ["sleep"]
    args: ["100000000"]
